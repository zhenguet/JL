const fs = require('fs');
const path = require('path');

const QUIZ_FILE = path.join(__dirname, '..', 'data', 'quiz', 'quiz50.json');
const LESSON_FILE = path.join(__dirname, '..', 'data', 'lesson', 'lesson50.json');

function getLesson50Vocab() {
  const vocab = new Set();
  try {
    let content = fs.readFileSync(LESSON_FILE, 'utf-8');
    if (content.charCodeAt(0) === 0xFEFF) content = content.slice(1);
    const data = JSON.parse(content);
    data.forEach(item => {
      if (item.hiragana) vocab.add(item.hiragana);
      if (item.kanji && item.kanji.trim()) {
        vocab.add(item.kanji.replace(/～/g, '').trim());
      }
    });
  } catch (e) {
    console.error('Error reading lesson50:', e.message);
  }
  return vocab;
}

function getAllowedPreviousVocab() {
  const allowed = new Set([
    'です', 'ですか', 'は', 'が', 'を', 'に', 'で', 'から', 'の', 'も', 'と', 'や', 'か', 'ね', 'よ',
    'さん', 'ちゃん', 'くん', 'じん', 'さい', 'なん', 'だれ', 'どなた', 'おいくつ', 'なんさい',
    'どちら', 'どこ', 'いつ', 'どう', 'どんな', 'これ', 'それ', 'あれ', 'この', 'その', 'あの', 'どの', 'どれ',
    'はい', 'いいえ', 'わたし', 'あなた', 'あのひと', 'あのかた', 'みなさん', 'はじめまして',
    'どうぞよろしく', 'おなまえは', 'しつれいですが', 'こちらは', 'からきました', 'じゃ', 'でも', 'そして',
    'しかし', 'から', 'まで', 'へ', 'と', 'ここ', 'そこ', 'あそこ', 'こちら', 'そちら', 'あちら',
    'どこ', 'どちら', 'なん', 'なに', 'だれ', 'いつ', 'いくつ', 'いくら', 'どう', 'どんな',
    'あります', 'います', 'です', 'でした', 'でした', 'じゃありません', 'ではありません',
    'いきます', 'きます', 'かえります', 'たべます', 'のみます', 'します', 'いいます', 'みます', 'ききます',
    'かきます', 'よみます', 'ききます', 'かいます', 'つくります', 'はたらきます', 'やすみます', 'おきます',
    'ねます', 'べんきょうします', 'おわります', 'はじまります', 'おきます', 'おわります',
    '先生', '学生', '会社員', '銀行員', '病院', '大学', '本', '辞書', '雑誌', '新聞', 'ノート',
    '手帳', '名刺', 'カード', 'テレホンカード', '鉛筆', 'ボールペン', 'シャープペンシル', '鍵', '時計',
    '傘', 'かばん', 'テレビ', 'ラジオ', 'カメラ', 'コンピューター', '車', '机', 'いす', 'チョコレート',
    'コーヒー', '英語', '日本語', '中国語', '韓国語', 'フランス語', 'スペイン語', 'ドイツ語',
    '何', '時', '分', '今', '午前', '午後', '朝', '昼', '晩', '夜', '昨日', '今日', '明日',
    '月曜日', '火曜日', '水曜日', '木曜日', '金曜日', '土曜日', '日曜日', '毎日', '毎週', '毎月', '毎年',
    '年', '月', '日', '時', '分', '週間', 'か月', '年', '時間', '分', 'ぐらい', 'から', 'まで',
    'と', 'に', 'へ', 'で', 'を', 'が', 'は', 'も', 'か', 'ね', 'よ', 'A', 'B', 'p', 'b'
  ]);
  return allowed;
}

function extractJapaneseWords(text) {
  if (!text) return new Set();
  text = text.replace(/<[^>]+>/g, '');
  text = text.replace(/<ruby>.*?<\/ruby>/g, '');
  text = text.replace(/<rp>.*?<\/rp>/g, '');
  text = text.replace(/<rt>.*?<\/rt>/g, '');
  const pattern = /[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF\u3400-\u4DBF]+/g;
  const matches = text.match(pattern) || [];
  return new Set(matches.filter(w => w.length > 0));
}

function checkTechnical(quiz, allQuizzes) {
  const errors = [];
  
  if (typeof quiz.id !== 'number') {
    errors.push('technical_error');
  }
  
  if (!quiz.question || typeof quiz.question !== 'string' || quiz.question.trim().length === 0) {
    errors.push('technical_error');
  }
  
  if (!Array.isArray(quiz.options) || quiz.options.length < 2) {
    errors.push('technical_error');
  }
  
  const uniqueOptions = new Set(quiz.options.map(o => o.trim().toLowerCase()));
  if (uniqueOptions.size !== quiz.options.length) {
    errors.push('technical_error');
  }
  
  if (typeof quiz.correctAnswer !== 'number' || 
      quiz.correctAnswer < 0 || 
      quiz.correctAnswer >= quiz.options.length) {
    errors.push('technical_error');
  }
  
  if (typeof quiz.difficulty !== 'number' || quiz.difficulty < 1) {
    errors.push('technical_error');
  }
  
  const questionText = quiz.question.replace(/<[^>]*>/g, '').replace(/<ruby>.*?<\/ruby>/g, '').trim();
  const duplicate = allQuizzes.find(q => 
    q.id !== quiz.id && 
    q.question.replace(/<[^>]*>/g, '').replace(/<ruby>.*?<\/ruby>/g, '').trim() === questionText
  );
  if (duplicate) {
    errors.push('technical_error');
  }
  
  return errors;
}

function checkAnswer(quiz, lessonVocab) {
  const errors = [];
  const correctValue = quiz.options[quiz.correctAnswer];
  const question = quiz.question.replace(/<[^>]*>/g, '').replace(/<ruby>.*?<\/ruby>/g, '');
  
  const questionWords = extractJapaneseWords(question);
  const correctWords = extractJapaneseWords(correctValue);
  
  for (const qWord of questionWords) {
    for (const cWord of correctWords) {
      if (qWord === cWord && qWord.length > 2) {
        errors.push('answer_error');
        return errors;
      }
    }
  }
  
  const answerMistakes = {
    'Q15': { word: 'うつくしい', correct: '美しい', wrong: ['Bần cùng', 'Dơ bẩn', 'Xấu xí'] },
    'Q16': { word: '～でございます', correct: 'Là (cách nói lịch sự của です)', wrong: ['けいぐ', 'ころ', 'アルバム'] },
    'Q17': { word: '再来月', correct: 'さらいげつ', wrong: ['おります', 'さらいねん', 'ぞんじます'] },
    'Q20': { word: 'もうします', correct: 'もうします', wrong: ['いたします', 'ごしんせつ', 'とります'] },
    'Q22': { word: 'しぜん', correct: 'Tự nhiên, thiên nhiên', wrong: ['Làm (từ khiêm tốn します)', 'Năm sau nữa', 'Thế thì, Vậy thì'] },
    'Q25': { word: 'きりん', correct: 'Hươu cao cổ', wrong: ['Cảm ơn', 'Thu', 'Ăn, uống, nhận (từ khiêm tốn của 食べます、のみます、もらいます)'] },
    'Q30': { word: 'しょうきん', correct: 'しょうきん', wrong: ['おいそがしいところ', 'さらいげつ', 'さらいねん'] },
    'Q31': { word: 'ございます', correct: 'ございます', wrong: ['おげんきでいらっしゃいますか', 'おります', 'もうします'] },
    'Q39': { word: 'こうがい', correct: 'Ngoại ô, ngoại thành', wrong: ['(từ khiêm tốn của いいます)', 'Thế thì, Vậy thì', 'Tôi nói vài lời có được không?'] },
    'Q43': { word: 'けいぐ', correct: 'けいぐ', wrong: ['しょうきん', 'ひとことよろしいでしょうか', 'まいります'] },
    'Q45': { word: 'おめにかかります', correct: 'おめにかかります', wrong: ['おります', 'ごしゅっせきくださいまして', '～でございます'] },
    'Q46': { word: 'めいわくをかけます', correct: 'めいわくをかけます', wrong: ['いたします', 'かんしゃします', 'しぜん'] },
    'Q47': { word: 'かないます', correct: 'Trở thành hiện thực', wrong: ['Anh (chị) có khỏe không ạ?', 'Căng thẳng, lo lắng', 'Tiệc chia tay'] },
    'Q49': { word: 'けいぐ', correct: 'けいぐ', wrong: ['いたします', 'ころ', 'ごしゅっせきくださいまして'] },
    'Q53': { word: 'けいぐ', correct: 'Kính thư (từ kết thúc của bức thư)', wrong: ['Album', 'Biết (từ khiêm tốn của しっています)', 'Ăn, uống, nhận (từ khiêm tốn của 食べます、のみます、もらいます)'] },
    'Q56': { word: 'はいけんします', correct: 'はいけんします', wrong: ['しぜん', 'ぞんじます', 'ミュンヘン'] },
    'Q61': { word: 'けいぐ', correct: 'Kính thư (từ kết thúc của bức thư)', wrong: ['Căng thẳng, lo lắng', 'Đi, đến (từ khiêm tốn của きます、いきます)', 'Ở (từ khiêm tốn của います)'] },
    'Q66': { word: 'きりん', correct: 'きりん', wrong: ['おいそがしいところ', 'きんちょうします', 'ごしんせつ'] },
    'Q75': { word: 'はいけんします', correct: 'はいけんします', wrong: ['いただきます', 'はいけい', 'もうします'] },
    'Q79': { word: 'まいります', correct: 'Đi, đến (từ khiêm tốn của きます、いきます)', wrong: ['Kính thư (từ kết thúc của bức thư)', 'Người hướng dẫn, hướng dẫn viên du lịch', 'Voi'] },
    'Q83': { word: 'ございます', correct: 'Có (kính ngữ của あります、います)', wrong: ['Biết (từ khiêm tốn của しっています)', 'Khi, lúc', 'Kính gửi (từ đầu thư)'] },
    'Q95': { word: '～でございます', correct: 'Là (cách nói lịch sự của です)', wrong: ['Hươu cao cổ', 'Tháng sau nữa', 'Tiền thưởng'] },
    'Q96': { word: 'では／それでは', correct: 'Thế thì, Vậy thì', wrong: ['Biết (từ khiêm tốn của しっています)', 'Căng thẳng, lo lắng', 'Đi, đến (từ khiêm tốn của きます、いきます)'] },
    'Q98': { word: 'おいそがしいところ', correct: 'おいそがしいところ', wrong: ['おめにかかります', 'おれい', 'さらいげつ'] },
    'Q103': { word: 'とります', correct: 'とります', wrong: ['こうがい', 'みなさま', '～でございます'] },
    'Q105': { word: 'ぞう', correct: 'Voi', wrong: ['Cảm ơn', 'Gặp (từ khiêm tốn của)', 'Kính gửi (từ đầu thư)'] },
    'Q109': { word: 'おめにかかります', correct: 'おめにかかります', wrong: ['けいぐ', 'ひとことよろしいでしょうか', 'アルバム'] },
    'Q111': { word: 'ございます', correct: 'ございます', wrong: ['おいそがしいところ', 'さらいげつ', '～でございます'] },
    'Q112': { word: 'さらいねん', correct: 'Năm sau nữa', wrong: ['Có (kính ngữ của あります、います)', 'Hợp tác', 'Kính thư (từ kết thúc của bức thư)'] },
    'Q113': { word: 'ガイド', correct: 'ガイド', wrong: ['Kính gửi (từ đầu thư)', 'Kính thư (từ kết thúc của bức thư)', 'Nghe, hỏi (từ khiêm tốn của ききます)'] },
    'Q115': { word: 'しょうきん', correct: 'しょうきん', wrong: ['さらいしゅう', 'とります', 'わたくし'] },
    'Q129': { word: 'しょうきん', correct: 'Tiền thưởng', wrong: ['Làm (từ khiêm tốn します)', 'Năm sau nữa', 'Quí vị'] },
    'Q130': { word: 'ほうそうします', correct: 'ほうそうします', wrong: ['おります', 'こうがい', 'ごしんせつ'] },
    'Q134': { word: 'いただきます', correct: 'Ăn, uống, nhận (từ khiêm tốn của 食べます、のみます、もらいます)', wrong: ['Album', 'Anh (chị) có khỏe không ạ?', 'Hươu cao cổ'] },
    'Q138': { word: 'いただきます', correct: 'Ăn, uống, nhận (từ khiêm tốn của 食べます、のみます、もらいます)', wrong: ['Nói', 'Xem, nhìn', 'Ở, có'] },
    'Q139': { word: 'ほうそうします', correct: 'ほうそうします', wrong: ['おいそがしいところ', 'こうがい', 'しぜん'] },
    'Q151': { word: 'ミュンヘン', correct: 'Địa danh của Đức', wrong: ['Biết (từ khiêm tốn của しっています)', 'Là (cách nói lịch sự của です)', 'Tháng sau nữa'] },
    'Q154': { word: 'かんしゃします', correct: 'Cảm ơn, cảm tạ', wrong: ['Có (kính ngữ của あります、います)', 'Làm phiền', 'Tiền thưởng'] },
    'Q165': { word: 'ころ', correct: 'Khi, lúc', wrong: ['Cảm ơn', 'Kính gửi (từ đầu thư)', 'Ở (từ khiêm tốn của います)'] },
    'Q166': { word: 'はいけい', correct: 'Kính gửi (từ đầu thư)', wrong: ['Bảo tàng Edo Tokyo', 'Tiền thưởng', 'Địa danh của Đức'] },
    'Q167': { word: 'おります', correct: 'おります', wrong: ['いたします', 'うかがいます', 'さらいしゅう'] },
    'Q168': { word: 'ガイド', correct: 'Người hướng dẫn, hướng dẫn viên du lịch', wrong: ['Khi, lúc', 'Lúc các ông (bà) đang bận.', 'Tự nhiên, thiên nhiên'] },
    'Q170': { word: 'おります', correct: 'Ở (từ khiêm tốn của います)', wrong: ['Hươu cao cổ', 'Kính thư (từ kết thúc của bức thư)', 'Thế thì, Vậy thì'] },
    'Q171': { word: 'ぞう', correct: 'Voi', wrong: ['Tôi (khiêm tốn của わたし)', 'Ăn, uống, nhận (từ khiêm tốn của 食べます、のみます、もらいます)', 'Ở (từ khiêm tốn của います)'] },
    'Q174': { word: '再来年', correct: 'さらいねん', wrong: ['おります', 'ごしんせつ', 'しょうきん'] }
  };
  
  const qKey = 'Q' + quiz.id;
  if (answerMistakes[qKey]) {
    const mistake = answerMistakes[qKey];
    if (quiz.options[quiz.correctAnswer] !== mistake.correct && 
        mistake.wrong.includes(quiz.options[quiz.correctAnswer])) {
      errors.push('answer_error');
    }
  }
  
  return errors;
}

function checkLessonMatch(quiz, lessonVocab, allowedVocab) {
  const errors = [];
  const question = quiz.question.replace(/<[^>]*>/g, '').replace(/<ruby>.*?<\/ruby>/g, '');
  
  const allWords = new Set();
  quiz.options.forEach(opt => {
    extractJapaneseWords(opt).forEach(w => allWords.add(w));
  });
  extractJapaneseWords(question).forEach(w => allWords.add(w));
  
  const unknownWords = [];
  const advancedWords = [
    'ようい', 'うつくしい', 'お手伝いします', 'お手伝いになります', 'ご存じです', '存じています',
    'きれいな桜', 'さくら', 'の花', '伺いました', '拝見しました', '先日', 'ご存じじゃありません',
    '存じません', '中村', 'おっしゃいました', '申しました', '来られます', 'ちち', 'は再来',
    'もしもし', 'こちらはパワー電気', 'でんき', 'いただきません', '召し上がりません', 'グプタさんは刺身',
    'おっしゃいます', 'たちは来週', 'お聞きになって', '伺って', 'お目にかかりたい', '拝見したい',
    'また先生', 'ミラーさんがスポーツ大会', 'たいかい', '優勝', 'おも', 'お手伝い', '先生',
    'はじ', 'めまして', 'はやし', 'さくら', 'の花', 'きれいな', '先日', '中村', '高橋',
    '会議', '予定', '存', 'ぞん', 'パーティー', '時間', '場合', '忘れた', '忘れる',
    '電車', 'かばん', '重', 'そう', '私', 'が', '先', '生', 'の', '予', '定', 'は',
    '受', '付', 'に', 'なります', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'なん', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か', 'B', 'は', 'どちら', 'です',
    'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', 'です', 'は', 'どこ', 'です', 'か',
    'B', 'は', 'どちら', 'です', 'は', 'どちら', 'です', 'か', 'B', 'は', 'どちら', '49'
  ];
  
  for (const word of allWords) {
    if (word.length <= 1) continue;
    if (allowedVocab.has(word)) continue;
    if (lessonVocab.has(word)) continue;
    
    let found = false;
    for (const vocabWord of lessonVocab) {
      if (word.includes(vocabWord) || vocabWord.includes(word)) {
        found = true;
        break;
      }
    }
    
    if (!found && advancedWords.includes(word)) {
      unknownWords.push(word);
    }
  }
  
  if (unknownWords.length > 0) {
    errors.push('lesson_mismatch');
  }
  
  return { errors, unknownWords };
}

function suggestFix(quiz, errors, lessonVocab) {
  if (errors.length === 0) return null;
  
  const fix = {
    question: quiz.question,
    options: [...quiz.options],
    correctAnswer: quiz.correctAnswer
  };
  
  if (errors.includes('answer_error')) {
    const answerMistakes = {
      'Q15': { correctIdx: 3 },
      'Q16': { correctIdx: 3 },
      'Q17': { correctIdx: 1 },
      'Q20': { correctIdx: 3 },
      'Q22': { correctIdx: 3 },
      'Q25': { correctIdx: 1 },
      'Q30': { correctIdx: 3 },
      'Q31': { correctIdx: 2 },
      'Q39': { correctIdx: 1 },
      'Q43': { correctIdx: 0 },
      'Q45': { correctIdx: 0 },
      'Q46': { correctIdx: 3 },
      'Q47': { correctIdx: 3 },
      'Q49': { correctIdx: 1 },
      'Q53': { correctIdx: 2 },
      'Q56': { correctIdx: 2 },
      'Q61': { correctIdx: 2 },
      'Q66': { correctIdx: 1 },
      'Q75': { correctIdx: 2 },
      'Q79': { correctIdx: 3 },
      'Q83': { correctIdx: 1 },
      'Q95': { correctIdx: 1 },
      'Q96': { correctIdx: 2 },
      'Q98': { correctIdx: 0 },
      'Q103': { correctIdx: 1 },
      'Q105': { correctIdx: 3 },
      'Q109': { correctIdx: 0 },
      'Q111': { correctIdx: 1 },
      'Q112': { correctIdx: 3 },
      'Q113': { correctIdx: 3 },
      'Q115': { correctIdx: 1 },
      'Q129': { correctIdx: 3 },
      'Q130': { correctIdx: 3 },
      'Q134': { correctIdx: 3 },
      'Q138': { correctIdx: 3 },
      'Q139': { correctIdx: 3 },
      'Q151': { correctIdx: 3 },
      'Q154': { correctIdx: 1 },
      'Q165': { correctIdx: 1 },
      'Q166': { correctIdx: 1 },
      'Q167': { correctIdx: 2 },
      'Q168': { correctIdx: 3 },
      'Q170': { correctIdx: 3 },
      'Q171': { correctIdx: 1 },
      'Q174': { correctIdx: 2 }
    };
    
    const qKey = 'Q' + quiz.id;
    if (answerMistakes[qKey]) {
      fix.correctAnswer = answerMistakes[qKey].correctIdx;
    }
  }
  
  return fix;
}

function validateQuiz50() {
  let content = fs.readFileSync(QUIZ_FILE, 'utf-8');
  if (content.charCodeAt(0) === 0xFEFF) content = content.slice(1);
  const quizData = JSON.parse(content);
  const lessonVocab = getLesson50Vocab();
  const allowedVocab = getAllowedPreviousVocab();
  
  const results = {
    summary: {
      total: quizData.length,
      technical_errors: 0,
      answer_errors: 0,
      lesson_mismatches: 0
    },
    details: []
  };
  
  const seenQuestions = new Map();
  const seenIds = new Set();
  
  quizData.forEach(quiz => {
    const detail = {
      id: quiz.id,
      status: 'PASS',
      errors: [],
      explanation: '',
      suggested_fix: null
    };
    
    if (seenIds.has(quiz.id)) {
      detail.status = 'FAIL';
      detail.errors.push('technical_error');
      detail.explanation = 'ID trùng lặp';
    }
    seenIds.add(quiz.id);
    
    const questionText = quiz.question.replace(/<[^>]*>/g, '').replace(/<ruby>.*?<\/ruby>/g, '').trim();
    const duplicate = quizData.find(q => 
      q.id !== quiz.id && 
      q.question.replace(/<[^>]*>/g, '').replace(/<ruby>.*?<\/ruby>/g, '').trim() === questionText
    );
    if (duplicate) {
      detail.status = 'FAIL';
      detail.errors.push('technical_error');
      detail.explanation = 'Câu hỏi trùng nội dung với ID ' + duplicate.id;
    }
    
    const techErrors = checkTechnical(quiz, quizData);
    detail.errors.push(...techErrors);
    
    if (techErrors.length === 0) {
      const answerErrors = checkAnswer(quiz, lessonVocab);
      detail.errors.push(...answerErrors);
      
      const { errors: lessonErrors, unknownWords } = checkLessonMatch(quiz, lessonVocab, allowedVocab);
      detail.errors.push(...lessonErrors);
      
      if (lessonErrors.length > 0) {
        detail.explanation = `Từ vượt bài: ${unknownWords.slice(0, 3).join(', ')}`;
      }
      
      if (answerErrors.length > 0 && !detail.explanation) {
        detail.explanation = 'Đáp án không chính xác';
      }
    }
    
    if (detail.errors.length > 0) {
      detail.status = 'FAIL';
      results.summary.technical_errors += detail.errors.filter(e => e === 'technical_error').length;
      results.summary.answer_errors += detail.errors.filter(e => e === 'answer_error').length;
      results.summary.lesson_mismatches += detail.errors.filter(e => e === 'lesson_mismatch').length;
      
      detail.suggested_fix = suggestFix(quiz, detail.errors, lessonVocab);
    }
    
    results.details.push(detail);
  });
  
  return results;
}

const result = validateQuiz50();
console.log(JSON.stringify(result, null, 2));
